# è®¾è®¡æ¨¡å¼

![JavaScriptè®¾è®¡æ¨¡å¼ä¸åº”ç”¨å®è·µ](https://user-images.githubusercontent.com/26266181/130546002-8cb052a0-f00d-4a71-ab4a-339bdd676b2d.png)

## 1 åˆ›å»ºå‹
### 1.1 å·¥å‚æ¨¡å¼
```js
function User(name , age, career, work) {
    this.name = name
    this.age = age
    this.career = career 
    this.work = work
}

function Factory(name, age, career) {
    let work
    switch(career) {
        case 'coder':
            work =  ['å†™ä»£ç ','å†™ç³»åˆ†', 'ä¿®Bug'] 
            break
        case 'product manager':
            work = ['è®¢ä¼šè®®å®¤', 'å†™PRD', 'å‚¬æ›´']
            break
        case 'boss':
            work = ['å–èŒ¶', 'çœ‹æŠ¥', 'è§å®¢æˆ·']
        case 'xxx':
            // å…¶å®ƒå·¥ç§çš„èŒè´£åˆ†é…
            ...
            
    return new User(name, age, career, work)
}
```

### 1.2 æŠ½è±¡å·¥å‚æ¨¡å¼
```js
class MobilePhoneFactory {
    // æä¾›æ“ä½œç³»ç»Ÿçš„æ¥å£
    createOS(){
        throw new Error("æŠ½è±¡å·¥å‚æ–¹æ³•ä¸å…è®¸ç›´æ¥è°ƒç”¨ï¼Œä½ éœ€è¦å°†æˆ‘é‡å†™ï¼");
    }
    // æä¾›ç¡¬ä»¶çš„æ¥å£
    createHardWare(){
        throw new Error("æŠ½è±¡å·¥å‚æ–¹æ³•ä¸å…è®¸ç›´æ¥è°ƒç”¨ï¼Œä½ éœ€è¦å°†æˆ‘é‡å†™ï¼");
    }
}

// å…·ä½“å·¥å‚ç»§æ‰¿è‡ªæŠ½è±¡å·¥å‚
class FakeStarFactory extends MobilePhoneFactory {
    createOS() {
        // æä¾›å®‰å“ç³»ç»Ÿå®ä¾‹
        return new AndroidOS()
    }
    createHardWare() {
        // æä¾›é«˜é€šç¡¬ä»¶å®ä¾‹
        return new QualcommHardWare()
    }
}

// å®šä¹‰æ“ä½œç³»ç»Ÿè¿™ç±»äº§å“çš„æŠ½è±¡äº§å“ç±»
class OS {
    controlHardWare() {
        throw new Error('æŠ½è±¡äº§å“æ–¹æ³•ä¸å…è®¸ç›´æ¥è°ƒç”¨ï¼Œä½ éœ€è¦å°†æˆ‘é‡å†™ï¼');
    }
}

// å®šä¹‰å…·ä½“æ“ä½œç³»ç»Ÿçš„å…·ä½“äº§å“ç±»
class AndroidOS extends OS {
    controlHardWare() {
        console.log('æˆ‘ä¼šç”¨å®‰å“çš„æ–¹å¼å»æ“ä½œç¡¬ä»¶')
    }
}

class AppleOS extends OS {
    controlHardWare() {
        console.log('æˆ‘ä¼šç”¨ğŸçš„æ–¹å¼å»æ“ä½œç¡¬ä»¶')
    }
}

// å®šä¹‰æ‰‹æœºç¡¬ä»¶è¿™ç±»äº§å“çš„æŠ½è±¡äº§å“ç±»
class HardWare {
    // æ‰‹æœºç¡¬ä»¶çš„å…±æ€§æ–¹æ³•ï¼Œè¿™é‡Œæå–äº†â€œæ ¹æ®å‘½ä»¤è¿è½¬â€è¿™ä¸ªå…±æ€§
    operateByOrder() {
        throw new Error('æŠ½è±¡äº§å“æ–¹æ³•ä¸å…è®¸ç›´æ¥è°ƒç”¨ï¼Œä½ éœ€è¦å°†æˆ‘é‡å†™ï¼');
    }
}

// å®šä¹‰å…·ä½“ç¡¬ä»¶çš„å…·ä½“äº§å“ç±»
class QualcommHardWare extends HardWare {
    operateByOrder() {
        console.log('æˆ‘ä¼šç”¨é«˜é€šçš„æ–¹å¼å»è¿è½¬')
    }
}

class MiWare extends HardWare {
    operateByOrder() {
        console.log('æˆ‘ä¼šç”¨å°ç±³çš„æ–¹å¼å»è¿è½¬')
    }
}

// è¿™æ˜¯æˆ‘çš„æ‰‹æœº
const myPhone = new FakeStarFactory()
// è®©å®ƒæ‹¥æœ‰æ“ä½œç³»ç»Ÿ
const myOS = myPhone.createOS()
// è®©å®ƒæ‹¥æœ‰ç¡¬ä»¶
const myHardWare = myPhone.createHardWare()
// å¯åŠ¨æ“ä½œç³»ç»Ÿ(è¾“å‡ºâ€˜æˆ‘ä¼šç”¨å®‰å“çš„æ–¹å¼å»æ“ä½œç¡¬ä»¶â€™)
myOS.controlHardWare()
// å”¤é†’ç¡¬ä»¶(è¾“å‡ºâ€˜æˆ‘ä¼šç”¨é«˜é€šçš„æ–¹å¼å»è¿è½¬â€™)
myHardWare.operateByOrder()

// éœ€è¦äº§å‡ºä¸€æ¬¾æ–°æœºæŠ•å…¥å¸‚åœº,ä¸éœ€è¦å¯¹æŠ½è±¡å·¥å‚MobilePhoneFactoryåšä»»ä½•ä¿®æ”¹
class newStarFactory extends MobilePhoneFactory {
    createOS() {
        // æ“ä½œç³»ç»Ÿå®ç°ä»£ç 
    }
    createHardWare() {
        // ç¡¬ä»¶å®ç°ä»£ç 
    }
}
```

### 1.3 å•ä¾‹æ¨¡å¼
- åŸç†ï¼šä¿è¯ä¸€ä¸ªç±»ä»…æœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›ä¸€ä¸ªè®¿é—®å®ƒçš„å…¨å±€è®¿é—®ç‚¹ï¼Œè¿™æ ·çš„æ¨¡å¼å°±å«åšå•ä¾‹æ¨¡å¼ã€‚
```js
class SingleDog {
    show() {
        console.log('æˆ‘æ˜¯ä¸€ä¸ªå•ä¾‹å¯¹è±¡')
    }
    static getInstance() {
        // åˆ¤æ–­æ˜¯å¦å·²ç»newè¿‡1ä¸ªå®ä¾‹
        if (!SingleDog.instance) {
            // è‹¥è¿™ä¸ªå”¯ä¸€çš„å®ä¾‹ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆå…ˆåˆ›å»ºå®ƒ
            SingleDog.instance = new SingleDog()
        }
        // å¦‚æœè¿™ä¸ªå”¯ä¸€çš„å®ä¾‹å·²ç»å­˜åœ¨ï¼Œåˆ™ç›´æ¥è¿”å›
        return SingleDog.instance
    }
}

const s1 = SingleDog.getInstance()
const s2 = SingleDog.getInstance()

// true
s1 === s2
```

`or`

```js
SingleDog.getInstance = (function() {
    // å®šä¹‰è‡ªç”±å˜é‡instanceï¼Œæ¨¡æ‹Ÿç§æœ‰å˜é‡
    let instance = null
    return function() {
        // åˆ¤æ–­è‡ªç”±å˜é‡æ˜¯å¦ä¸ºnull
        if(!instance) {
            // å¦‚æœä¸ºnullåˆ™newå‡ºå”¯ä¸€å®ä¾‹
            instance = new SingleDog()
        }
        return instance
    }
})()
```

- Vuexä¸­çš„å®é™…åº”ç”¨ï¼šç¡®ä¿Storeçš„å”¯ä¸€æ€§
```js
let Vue // è¿™ä¸ªVueçš„ä½œç”¨å’Œæ¥¼ä¸Šçš„instanceä½œç”¨ä¸€æ ·
...

export function install (_Vue) {
  // åˆ¤æ–­ä¼ å…¥çš„Vueå®ä¾‹å¯¹è±¡æ˜¯å¦å·²ç»è¢«installè¿‡Vuexæ’ä»¶ï¼ˆæ˜¯å¦æœ‰äº†å”¯ä¸€çš„stateï¼‰
  if (Vue && _Vue === Vue) {
    if (process.env.NODE_ENV !== 'production') {
      console.error(
        '[vuex] already installed. Vue.use(Vuex) should be called only once.'
      )
    }
    return
  }
  // è‹¥æ²¡æœ‰ï¼Œåˆ™ä¸ºè¿™ä¸ªVueå®ä¾‹å¯¹è±¡installä¸€ä¸ªå”¯ä¸€çš„Vuex
  Vue = _Vue
  // å°†Vuexçš„åˆå§‹åŒ–é€»è¾‘å†™è¿›Vueçš„é’©å­å‡½æ•°é‡Œ
  applyMixin(Vue)
}
```



### 1.4 åŸå‹æ¨¡å¼
```js
// åˆ›å»ºä¸€ä¸ªDogæ„é€ å‡½æ•°
function Dog(name, age) {
  this.name = name
  this.age = age
}
Dog.prototype.eat = function() {
  console.log('è‚‰éª¨å¤´çœŸå¥½åƒ')
}
// ä½¿ç”¨Dogæ„é€ å‡½æ•°åˆ›å»ºdogå®ä¾‹
const dog = new Dog('æ—ºè´¢', 3)
```

## 2 ç»“æ„å‹
### 2.1 è£…é¥°å™¨æ¨¡å¼
- ES6
```js
// å®šä¹‰æ‰“å¼€æŒ‰é’®
class OpenButton {
    // ç‚¹å‡»åå±•ç¤ºå¼¹æ¡†ï¼ˆæ—§é€»è¾‘ï¼‰
    onClick() {
        const modal = new Modal()
    	modal.style.display = 'block'
    }
}

// å®šä¹‰æŒ‰é’®å¯¹åº”çš„è£…é¥°å™¨
class Decorator {
    // å°†æŒ‰é’®å®ä¾‹ä¼ å…¥
    constructor(open_button) {
        this.open_button = open_button
    }
    
    onClick() {
        this.open_button.onClick()
        // â€œåŒ…è£…â€äº†ä¸€å±‚æ–°é€»è¾‘
        this.changeButtonStatus()
    }
    
    changeButtonStatus() {
        this.changeButtonText()
        this.disableButton()
    }
    
    disableButton() {
        const btn =  document.getElementById('open')
        btn.setAttribute("disabled", true)
    }
    
    changeButtonText() {
        const btn = document.getElementById('open')
        btn.innerText = 'å¿«å»ç™»å½•'
    }
}

const openButton = new OpenButton()
const decorator = new Decorator(openButton)

document.getElementById('open').addEventListener('click', function() {
    // openButton.onClick()
    // æ­¤å¤„å¯ä»¥åˆ†åˆ«å°è¯•ä¸¤ä¸ªå®ä¾‹çš„onClickæ–¹æ³•ï¼ŒéªŒè¯è£…é¥°å™¨æ˜¯å¦ç”Ÿæ•ˆ
    decorator.onClick()
})
```

- ES7
  - æµè§ˆå™¨å’Œ Node ç›®å‰éƒ½ä¸æ”¯æŒè£…é¥°å™¨è¯­æ³•ï¼Œéœ€è¦å¤§å®¶å®‰è£… `Babel` è¿›è¡Œè½¬ç 
    - å®‰è£… Babel åŠè£…é¥°å™¨ç›¸å…³çš„ Babel æ’ä»¶
    > npm install babel-preset-env babel-plugin-transform-decorators-legacy --save-dev
    - ç¼–å†™é…ç½®æ–‡ä»¶.babelrc
    > {
        "presets": ["env"],
        "plugins": ["transform-decorators-legacy"]
      }
    - å…¨å±€çš„ Babel å‘½ä»¤è¡Œå·¥å…·ç”¨äºè½¬ç 
    > npm install babel-cli -g
    - å¯¹ç›®æ ‡æ–‡ä»¶è¿›è¡Œè½¬ç 
    > babel test.js --out-file babel_test.js

  - ç±»è£…ä¸Šè£…é¥°å™¨
  ```js
  // è£…é¥°å™¨å‡½æ•°ï¼Œå®ƒçš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ç›®æ ‡ç±»
  function classDecorator(target) {
      target.hasDecorator = true
      return target
  }

  // å°†è£…é¥°å™¨â€œå®‰è£…â€åˆ°Buttonç±»ä¸Š
  @classDecorator
  class Button {
      // Buttonç±»çš„ç›¸å…³é€»è¾‘
  }

  // éªŒè¯è£…é¥°å™¨æ˜¯å¦ç”Ÿæ•ˆ
  console.log('Button æ˜¯å¦è¢«è£…é¥°äº†ï¼š', Button.hasDecorator)
  ```
  
  - è£…é¥°ç±»é‡Œé¢çš„æ–¹æ³•
  ```js
  // å…·ä½“çš„å‚æ•°æ„ä¹‰ï¼Œåœ¨ä¸‹ä¸ªå°èŠ‚ï¼Œè¿™é‡Œå¤§å®¶å…ˆæ„ŸçŸ¥ä¸€ä¸‹æ“ä½œ
  function funcDecorator(target, name, descriptor) {
      let originalMethod = descriptor.value
      descriptor.value = function() {
      console.log('æˆ‘æ˜¯Funcçš„è£…é¥°å™¨é€»è¾‘')
      return originalMethod.apply(this, arguments)
    }
    return descriptor
  }

  class Button {
      @funcDecorator
      onClick() { 
          console.log('æˆ‘æ˜¯Funcçš„åŸæœ‰é€»è¾‘')
      }
  }

  // éªŒè¯è£…é¥°å™¨æ˜¯å¦ç”Ÿæ•ˆ
  const button = new Button()
  button.onClick()
  ```

### 2.2 é€‚é…å™¨æ¨¡å¼
- å¼•å…¥æ¥å£æ—¶è¿›è¡Œä¸€æ¬¡é€‚é…ï¼Œä¾¿å¯è½»æ¾åœ° cover æ‰ä¸šåŠ¡é‡Œå¯èƒ½ä¼šæœ‰çš„å¤šæ¬¡è°ƒç”¨
```js
// Ajaxé€‚é…å™¨å‡½æ•°ï¼Œå…¥å‚ä¸æ—§æ¥å£ä¿æŒä¸€è‡´
async function AjaxAdapter(type, url, data, success, failed) {
    const type = type.toUpperCase()
    let result
    try {
         // å®é™…çš„è¯·æ±‚å…¨éƒ¨ç”±æ–°æ¥å£å‘èµ·
         if(type === 'GET') {
            result = await HttpUtils.get(url) || {}
        } else if(type === 'POST') {
            result = await HttpUtils.post(url, data) || {}
        }
        // å‡è®¾è¯·æ±‚æˆåŠŸå¯¹åº”çš„çŠ¶æ€ç æ˜¯1
        result.statusCode === 1 && success ? success(result) : failed(result.statusCode)
    } catch(error) {
        // æ•æ‰ç½‘ç»œé”™è¯¯
        if(failed){
            failed(error.statusCode);
        }
    }
}

// ç”¨é€‚é…å™¨é€‚é…æ—§çš„Ajaxæ–¹æ³•
async function Ajax(type, url, data, success, failed) {
    await AjaxAdapter(type, url, data, success, failed)
}
```

- ç”Ÿäº§å®è·µï¼šaxiosä¸­çš„é€‚é…å™¨
> é™¤äº†ç®€æ˜ä¼˜é›…çš„apiä¹‹å¤–ï¼Œaxios å¼ºå¤§çš„åœ°æ–¹è¿˜åœ¨äºï¼Œå®ƒä¸ä»…ä»…æ˜¯ä¸€ä¸ªå±€é™äºæµè§ˆå™¨ç«¯çš„åº“ã€‚åœ¨Nodeç¯å¢ƒä¸‹ï¼Œæˆ‘ä»¬å°è¯•è°ƒç”¨ä¸Šé¢çš„ apiï¼Œä¼šå‘ç°å®ƒç…§æ ·å¥½ä½¿ â€”â€” axios å®Œç¾åœ°æŠ¹å¹³äº†ä¸¤ç§ç¯å¢ƒä¸‹apiçš„è°ƒç”¨å·®å¼‚ï¼Œé çš„æ­£æ˜¯å¯¹é€‚é…å™¨æ¨¡å¼çš„çµæ´»è¿ç”¨ã€‚
> åœ¨ axios çš„æ ¸å¿ƒé€»è¾‘ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ³¨æ„åˆ°å®é™…ä¸Šæ´¾å‘è¯·æ±‚çš„æ˜¯ dispatchRequest æ–¹æ³•ã€‚è¯¥æ–¹æ³•å†…éƒ¨å…¶å®ä¸»è¦åšäº†ä¸¤ä»¶äº‹ï¼š
>   1. æ•°æ®è½¬æ¢ï¼Œè½¬æ¢è¯·æ±‚ä½“/å“åº”ä½“ï¼Œå¯ä»¥ç†è§£ä¸ºæ•°æ®å±‚é¢çš„é€‚é…ï¼›
>   2. è°ƒç”¨é€‚é…å™¨ã€‚
```js
// è‹¥ç”¨æˆ·æœªæ‰‹åŠ¨é…ç½®é€‚é…å™¨ï¼Œåˆ™ä½¿ç”¨é»˜è®¤çš„é€‚é…å™¨
var adapter = config.adapter || defaults.adapter;
  
// dispatchRequestæ–¹æ³•çš„æœ«å°¾è°ƒç”¨çš„æ˜¯é€‚é…å™¨æ–¹æ³•
return adapter(config).then(function onAdapterResolution(response) {
  // è¯·æ±‚æˆåŠŸçš„å›è°ƒ
  throwIfCancellationRequested(config);

  // è½¬æ¢å“åº”ä½“
  response.data = transformData(
    response.data,
    response.headers,
    config.transformResponse
  );

  return response;
}, function onAdapterRejection(reason) {
  // è¯·æ±‚å¤±è´¥çš„å›è°ƒ
  if (!isCancel(reason)) {
    throwIfCancellationRequested(config);

    // è½¬æ¢å“åº”ä½“
    if (reason && reason.response) {
      reason.response.data = transformData(
        reason.response.data,
        reason.response.headers,
        config.transformResponse
      );
    }
  }

  return Promise.reject(reason);
});
```
å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨é»˜è®¤é€‚é…å™¨çš„é¢‘ç‡æ›´é«˜ã€‚é»˜è®¤é€‚é…å™¨åœ¨axios/lib/default.jsé‡Œæ˜¯é€šè¿‡getDefaultAdapteræ–¹æ³•æ¥è·å–çš„ï¼š
```js
function getDefaultAdapter() {
  var adapter;
  // åˆ¤æ–­å½“å‰æ˜¯å¦æ˜¯nodeç¯å¢ƒ
  if (typeof process !== 'undefined' && Object.prototype.toString.call(process) === '[object process]') {
    // å¦‚æœæ˜¯nodeç¯å¢ƒï¼Œè°ƒç”¨nodeä¸“å±çš„httpé€‚é…å™¨
    adapter = require('./adapters/http');
  } else if (typeof XMLHttpRequest !== 'undefined') {
    // å¦‚æœæ˜¯æµè§ˆå™¨ç¯å¢ƒï¼Œè°ƒç”¨åŸºäºxhrçš„é€‚é…å™¨
    adapter = require('./adapters/xhr');
  }
  return adapter;
}

// http é€‚é…å™¨
module.exports = function httpAdapter(config) {
  return new Promise(function dispatchHttpRequest(resolvePromise, rejectPromise) {
    // å…·ä½“é€»è¾‘
  }
}

// xhr é€‚é…å™¨
module.exports = function xhrAdapter(config) {
  return new Promise(function dispatchXhrRequest(resolve, reject) {
    // å…·ä½“é€»è¾‘
  }
}
```

### 2.3 ä»£ç†æ¨¡å¼
- ä¿æŠ¤ä»£ç† - ES6ä¸­çš„Proxy
```js
// æ™®é€šç§å¯†ä¿¡æ¯
const baseInfo = ['age', 'career']
// æœ€ç§å¯†ä¿¡æ¯
const privateInfo = ['avatar', 'phone']

// ç”¨æˆ·ï¼ˆåŒäº‹Aï¼‰å¯¹è±¡å®ä¾‹
const user = {
    ...(ä¸€äº›å¿…è¦çš„ä¸ªäººä¿¡æ¯)
    isValidated: true,
    isVIP: false,
}

// æ˜é‡‘å©šä»‹æ‰€ç™»åœºäº†
const JuejinLovers = new Proxy(girl, {
  get: function(girl, key) {
      if(baseInfo.indexOf(key)!==-1 && !user.isValidated) {
          alert('æ‚¨è¿˜æ²¡æœ‰å®ŒæˆéªŒè¯å“¦')
          return
      }
      
      //...(æ­¤å¤„çœç•¥å…¶å®ƒæœ‰çš„æ²¡çš„å„ç§æ ¡éªŒé€»è¾‘)
    
      // æ­¤å¤„æˆ‘ä»¬è®¤ä¸ºåªæœ‰éªŒè¯è¿‡çš„ç”¨æˆ·æ‰å¯ä»¥è´­ä¹°VIP
      if(user.isValidated && privateInfo.indexOf(key) && !user.isVIP) {
          alert('åªæœ‰VIPæ‰å¯ä»¥æŸ¥çœ‹è¯¥ä¿¡æ¯å“¦')
          return
      }
  }
})
```

ä»¥ä¸Šä¸»è¦æ˜¯ getter å±‚é¢çš„æ‹¦æˆª,æˆ‘ä»¬è¿˜å¯ä»¥ä½œ setter å±‚é¢çš„æ‹¦æˆª

```js
// è§„å®šç¤¼ç‰©çš„æ•°æ®ç»“æ„ç”±typeå’Œvalueç»„æˆ
const present = {
    type: 'å·§å…‹åŠ›',
    value: 60,
}

// ä¸ºç”¨æˆ·å¢å¼€presentså­—æ®µå­˜å‚¨ç¤¼ç‰©
const girl = {
  // å§“å
  name: 'å°ç¾',
  // è‡ªæˆ‘ä»‹ç»
  aboutMe: '...'ï¼ˆå¤§å®¶è‡ªè¡Œè„‘è¡¥å§ï¼‰
  // å¹´é¾„
  age: 24,
  // èŒä¸š
  career: 'teacher',
  // å‡å¤´åƒ
  fakeAvatar: 'xxxx'(æ–°å£ç»“è¡£çš„å›¾ç‰‡åœ°å€ï¼‰
  // çœŸå®å¤´åƒ
  avatar: 'xxxx'(è‡ªå·±çš„ç…§ç‰‡åœ°å€),
  // æ‰‹æœºå·
  phone: 123456,
  // ç¤¼ç‰©æ•°ç»„
  presents: [],
  // æ‹’æ”¶50å—ä»¥ä¸‹çš„ç¤¼ç‰©
  bottomValue: 50,
  // è®°å½•æœ€è¿‘ä¸€æ¬¡æ”¶åˆ°çš„ç¤¼ç‰©
  lastPresent: present,
}

// æ˜é‡‘å©šä»‹æ‰€æ¨å‡ºäº†å°ç¤¼ç‰©åŠŸèƒ½
const JuejinLovers = new Proxy(girl, {
  get: function(girl, key) {
    if(baseInfo.indexOf(key)!==-1 && !user.isValidated) {
        alert('æ‚¨è¿˜æ²¡æœ‰å®ŒæˆéªŒè¯å“¦')
        return
    }
    
    //...(æ­¤å¤„çœç•¥å…¶å®ƒæœ‰çš„æ²¡çš„å„ç§æ ¡éªŒé€»è¾‘)
  
    // æ­¤å¤„æˆ‘ä»¬è®¤ä¸ºåªæœ‰éªŒè¯è¿‡çš„ç”¨æˆ·æ‰å¯ä»¥è´­ä¹°VIP
    if(user.isValidated && privateInfo.indexOf(key)!==-1 && !user.isVIP) {
        alert('åªæœ‰VIPæ‰å¯ä»¥æŸ¥çœ‹è¯¥ä¿¡æ¯å“¦')
        return
    }
  }
  
  set: function(girl, key, val) {
 
    // æœ€è¿‘ä¸€æ¬¡é€æ¥çš„ç¤¼ç‰©ä¼šå°è¯•èµ‹å€¼ç»™lastPresentå­—æ®µ
    if(key === 'lastPresent') {
      if(val.value < girl.bottomValue) {
          alert('sorryï¼Œæ‚¨çš„ç¤¼ç‰©è¢«æ‹’æ”¶äº†')
          return
      }
    
      // å¦‚æœæ²¡æœ‰æ‹’æ”¶ï¼Œåˆ™èµ‹å€¼æˆåŠŸï¼ŒåŒæ—¶å¹¶å…¥presentsæ•°ç»„
      girl.lastPresent = val
      girl.presents = [...girl.presents, val]
    }
  }
 
})
```

- äº‹ä»¶ä»£ç†
```js
// è·å–çˆ¶å…ƒç´ 
const father = document.getElementById('father')

// ç»™çˆ¶å…ƒç´ å®‰è£…ä¸€æ¬¡ç›‘å¬å‡½æ•°
father.addEventListener('click', function(e) {
    // è¯†åˆ«æ˜¯å¦æ˜¯ç›®æ ‡å­å…ƒç´ 
    if(e.target.tagName === 'A') {
        // ä»¥ä¸‹æ˜¯ç›‘å¬å‡½æ•°çš„å‡½æ•°ä½“
        e.preventDefault()
        alert(`æˆ‘æ˜¯${e.target.innerText}`)
    }
} )
```

- è™šæ‹Ÿä»£ç† - å›¾ç‰‡çš„é¢„åŠ è½½
```js
class PreLoadImage {
    constructor(imgNode) {
        // è·å–çœŸå®çš„DOMèŠ‚ç‚¹
        this.imgNode = imgNode
    }
     
    // æ“ä½œimgèŠ‚ç‚¹çš„srcå±æ€§
    setSrc(imgUrl) {
        this.imgNode.src = imgUrl
    }
}

class ProxyImage {
    // å ä½å›¾çš„urlåœ°å€
    static LOADING_URL = 'xxxxxx'

    constructor(targetImage) {
        // ç›®æ ‡Imageï¼Œå³PreLoadImageå®ä¾‹
        this.targetImage = targetImage
    }
    
    // è¯¥æ–¹æ³•ä¸»è¦æ“ä½œè™šæ‹ŸImageï¼Œå®ŒæˆåŠ è½½
    setSrc(targetUrl) {
       // çœŸå®imgèŠ‚ç‚¹åˆå§‹åŒ–æ—¶å±•ç¤ºçš„æ˜¯ä¸€ä¸ªå ä½å›¾
        this.targetImage.setSrc(ProxyImage.LOADING_URL)
        // åˆ›å»ºä¸€ä¸ªå¸®æˆ‘ä»¬åŠ è½½å›¾ç‰‡çš„è™šæ‹ŸImageå®ä¾‹
        const virtualImage = new Image()
        // ç›‘å¬ç›®æ ‡å›¾ç‰‡åŠ è½½çš„æƒ…å†µï¼Œå®Œæˆæ—¶å†å°†DOMä¸Šçš„çœŸå®imgèŠ‚ç‚¹çš„srcå±æ€§è®¾ç½®ä¸ºç›®æ ‡å›¾ç‰‡çš„url
        virtualImage.onload = () => {
            this.targetImage.setSrc(targetUrl)
        }
        // è®¾ç½®srcå±æ€§ï¼Œè™šæ‹ŸImageå®ä¾‹å¼€å§‹åŠ è½½å›¾ç‰‡
        virtualImage.src = targetUrl
    }
}
```

- ç¼“å­˜ä»£ç† - å¯¹ä¼ å…¥çš„å‚æ•°è¿›è¡Œæ±‚å’Œ
```js
// addAllæ–¹æ³•ä¼šå¯¹ä½ ä¼ å…¥çš„æ‰€æœ‰å‚æ•°åšæ±‚å’Œæ“ä½œ
const addAll = function() {
    console.log('è¿›è¡Œäº†ä¸€æ¬¡æ–°è®¡ç®—')
    let result = 0
    const len = arguments.length
    for(let i = 0; i < len; i++) {
        result += arguments[i]
    }
    return result
}

// ä¸ºæ±‚å’Œæ–¹æ³•åˆ›å»ºä»£ç†
const proxyAddAll = (function(){
    // æ±‚å’Œç»“æœçš„ç¼“å­˜æ± 
    const resultCache = {}
    return function() {
        // å°†å…¥å‚è½¬åŒ–ä¸ºä¸€ä¸ªå”¯ä¸€çš„å…¥å‚å­—ç¬¦ä¸²
        const args = Array.prototype.join.call(arguments, ',')
        
        // æ£€æŸ¥æœ¬æ¬¡å…¥å‚æ˜¯å¦æœ‰å¯¹åº”çš„è®¡ç®—ç»“æœ
        if(args in resultCache) {
            // å¦‚æœæœ‰ï¼Œåˆ™è¿”å›ç¼“å­˜æ± é‡Œç°æˆçš„ç»“æœ
            return resultCache[args]
        }
        return resultCache[args] = addAll(...arguments)
    }
})()
```


## 3 è¡Œä¸ºå‹
### 3.1 è§‚å¯Ÿè€…æ¨¡å¼
- å‘å¸ƒè€…
```js
// å®šä¹‰å‘å¸ƒè€…ç±»
class Publisher {
  constructor() {
    this.observers = []
    console.log('Publisher created')
  }
  // å¢åŠ è®¢é˜…è€…
  add(observer) {
    console.log('Publisher.add invoked')
    this.observers.push(observer)
  }
  // ç§»é™¤è®¢é˜…è€…
  remove(observer) {
    console.log('Publisher.remove invoked')
    this.observers.forEach((item, i) => {
      if (item === observer) {
        this.observers.splice(i, 1)
      }
    })
  }
  // é€šçŸ¥æ‰€æœ‰è®¢é˜…è€…
  notify() {
    console.log('Publisher.notify invoked')
    this.observers.forEach((observer) => {
      observer.update(this)
    })
  }
}
```

- è®¢é˜…è€…
```js
// å®šä¹‰è®¢é˜…è€…ç±»
class Observer {
    constructor() {
        console.log('Observer created')
    }

    update() {
        console.log('Observer.update invoked')
    }
}
```

- å‘å¸ƒè€…å®ä¾‹
```js
// å®šä¹‰ä¸€ä¸ªå…·ä½“çš„éœ€æ±‚æ–‡æ¡£ï¼ˆprdï¼‰å‘å¸ƒç±»
class PrdPublisher extends Publisher {
    constructor() {
        super()
        // åˆå§‹åŒ–éœ€æ±‚æ–‡æ¡£
        this.prdState = null
        // éŸ©æ¢…æ¢…è¿˜æ²¡æœ‰æ‹‰ç¾¤ï¼Œå¼€å‘ç¾¤ç›®å‰ä¸ºç©º
        this.observers = []
        console.log('PrdPublisher created')
    }
    
    // è¯¥æ–¹æ³•ç”¨äºè·å–å½“å‰çš„prdState
    getState() {
        console.log('PrdPublisher.getState invoked')
        return this.prdState
    }
    
    // è¯¥æ–¹æ³•ç”¨äºæ”¹å˜prdStateçš„å€¼
    setState(state) {
        console.log('PrdPublisher.setState invoked')
        // prdçš„å€¼å‘ç”Ÿæ”¹å˜
        this.prdState = state
        // éœ€æ±‚æ–‡æ¡£å˜æ›´ï¼Œç«‹åˆ»é€šçŸ¥æ‰€æœ‰å¼€å‘è€…
        this.notify()
    }
}
```

- è®¢é˜…è€…å®ä¾‹
```js
class DeveloperObserver extends Observer {
    constructor() {
        super()
        // éœ€æ±‚æ–‡æ¡£ä¸€å¼€å§‹è¿˜ä¸å­˜åœ¨ï¼Œprdåˆå§‹ä¸ºç©ºå¯¹è±¡
        this.prdState = {}
        console.log('DeveloperObserver created')
    }
    
    // é‡å†™ä¸€ä¸ªå…·ä½“çš„updateæ–¹æ³•
    update(publisher) {
        console.log('DeveloperObserver.update invoked')
        // æ›´æ–°éœ€æ±‚æ–‡æ¡£
        this.prdState = publisher.getState()
        // è°ƒç”¨å·¥ä½œå‡½æ•°
        this.work()
    }
    
    // workæ–¹æ³•ï¼Œä¸€ä¸ªä¸“é—¨æ¬ç –çš„æ–¹æ³•
    work() {
        // è·å–éœ€æ±‚æ–‡æ¡£
        const prd = this.prdState
        // å¼€å§‹åŸºäºéœ€æ±‚æ–‡æ¡£æä¾›çš„ä¿¡æ¯æ¬ç –ã€‚ã€‚ã€‚
        ...
        console.log('996 begins...')
    }
}
```

- å‘å¸ƒ - è®¢é˜…äº¤äº’
```js
// åˆ›å»ºè®¢é˜…è€…ï¼šå‰ç«¯å¼€å‘æé›·
const liLei = new DeveloperObserver()
// åˆ›å»ºè®¢é˜…è€…ï¼šæœåŠ¡ç«¯å¼€å‘å°Aï¼ˆsorryã€‚ã€‚ã€‚èµ·åå­—çœŸçš„å¤ªéš¾äº†ï¼‰
const A = new DeveloperObserver()
// åˆ›å»ºè®¢é˜…è€…ï¼šæµ‹è¯•åŒå­¦å°B
const B = new DeveloperObserver()
// éŸ©æ¢…æ¢…å‡ºç°äº†
const hanMeiMei = new PrdPublisher()
// éœ€æ±‚æ–‡æ¡£å‡ºç°äº†
const prd = {
    // å…·ä½“çš„éœ€æ±‚å†…å®¹
    ...
}
// éŸ©æ¢…æ¢…å¼€å§‹æ‹‰ç¾¤
hanMeiMei.add(liLei)
hanMeiMei.add(A)
hanMeiMei.add(B)
// éŸ©æ¢…æ¢…å‘é€äº†éœ€æ±‚æ–‡æ¡£ï¼Œå¹¶@äº†æ‰€æœ‰äºº
hanMeiMei.setState(prd)
```

### 3.2 è§‚å¯Ÿè€…æ¨¡å¼
- Vueæ•°æ®åŒå‘ç»‘å®šï¼ˆå“åº”å¼ç³»ç»Ÿï¼‰çš„å®ç°åŸç†
  - å®ç°observer
  ```js
  // observeæ–¹æ³•éå†å¹¶åŒ…è£…å¯¹è±¡å±æ€§
  function observe(target) {
      // è‹¥targetæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œåˆ™éå†å®ƒ
      if(target && typeof target === 'object') {
          Object.keys(target).forEach((key)=> {
              // defineReactiveæ–¹æ³•ä¼šç»™ç›®æ ‡å±æ€§è£…ä¸Šâ€œç›‘å¬å™¨â€
              defineReactive(target, key, target[key])
          })
      }
  }

  // å®šä¹‰defineReactiveæ–¹æ³•
  function defineReactive(target, key, val) {
      // å±æ€§å€¼ä¹Ÿå¯èƒ½æ˜¯objectç±»å‹ï¼Œè¿™ç§æƒ…å†µä¸‹éœ€è¦è°ƒç”¨observeè¿›è¡Œé€’å½’éå†
      observe(val)
      // ä¸ºå½“å‰å±æ€§å®‰è£…ç›‘å¬å™¨
      Object.defineProperty(target, key, {
           // å¯æšä¸¾
          enumerable: true,
          // ä¸å¯é…ç½®
          configurable: false, 
          get: function () {
              return val;
          },
          // ç›‘å¬å™¨å‡½æ•°
          set: function (value) {
              console.log(`${target}å±æ€§çš„${key}å±æ€§ä»${val}å€¼å˜æˆäº†äº†${value}`)
              val = value
          }
      });
  }
  ```

  - å®ç°è®¢é˜…è€… Dep
  ```js
  // å®šä¹‰è®¢é˜…è€…ç±»Dep
  class Dep {
      constructor() {
          // åˆå§‹åŒ–è®¢é˜…é˜Ÿåˆ—
          this.subs = []
      }

      // å¢åŠ è®¢é˜…è€…
      addSub(sub) {
          this.subs.push(sub)
      }

      // é€šçŸ¥è®¢é˜…è€…ï¼ˆæ˜¯ä¸æ˜¯æ‰€æœ‰çš„ä»£ç éƒ½ä¼¼æ›¾ç›¸è¯†ï¼Ÿï¼‰
      notify() {
          this.subs.forEach((sub)=>{
              sub.update()
          })
      }
  }
  ```
  - æ”¹å†™ defineReactive ä¸­çš„ setter æ–¹æ³•ï¼Œåœ¨ç›‘å¬å™¨é‡Œå»é€šçŸ¥è®¢é˜…è€…
  ```js
  function defineReactive(target, key, val) {
      const dep = new Dep()
      // ç›‘å¬å½“å‰å±æ€§
      observe(val)
      Object.defineProperty(target, key, {
          set: (value) => {
              // é€šçŸ¥æ‰€æœ‰è®¢é˜…è€…
              dep.notify()
          }
      })
  }
  ```
  
- å®ç°ä¸€ä¸ªEvent Bus/ Event Emitter
```js
// è¿™é‡ŒfuncæŒ‡someEventè¿™ä¸ªäº‹ä»¶çš„ç›‘å¬å‡½æ•°
this.bus.$on('someEvent', func)

// è¿™é‡ŒparamsæŒ‡someEventè¿™ä¸ªäº‹ä»¶è¢«è§¦å‘æ—¶å›è°ƒå‡½æ•°æ¥æ”¶çš„å…¥å‚
this.bus.$emit('someEvent', params)

class EventEmitter {
  constructor() {
    // handlersæ˜¯ä¸€ä¸ªmapï¼Œç”¨äºå­˜å‚¨äº‹ä»¶ä¸å›è°ƒä¹‹é—´çš„å¯¹åº”å…³ç³»
    this.handlers = {}
  }

  // onæ–¹æ³•ç”¨äºå®‰è£…äº‹ä»¶ç›‘å¬å™¨ï¼Œå®ƒæ¥å—ç›®æ ‡äº‹ä»¶åå’Œå›è°ƒå‡½æ•°ä½œä¸ºå‚æ•°
  on(eventName, cb) {
    // å…ˆæ£€æŸ¥ä¸€ä¸‹ç›®æ ‡äº‹ä»¶åæœ‰æ²¡æœ‰å¯¹åº”çš„ç›‘å¬å‡½æ•°é˜Ÿåˆ—
    if (!this.handlers[eventName]) {
      // å¦‚æœæ²¡æœ‰ï¼Œé‚£ä¹ˆé¦–å…ˆåˆå§‹åŒ–ä¸€ä¸ªç›‘å¬å‡½æ•°é˜Ÿåˆ—
      this.handlers[eventName] = []
    }

    // æŠŠå›è°ƒå‡½æ•°æ¨å…¥ç›®æ ‡äº‹ä»¶çš„ç›‘å¬å‡½æ•°é˜Ÿåˆ—é‡Œå»
    this.handlers[eventName].push(cb)
  }

  // emitæ–¹æ³•ç”¨äºè§¦å‘ç›®æ ‡äº‹ä»¶ï¼Œå®ƒæ¥å—äº‹ä»¶åå’Œç›‘å¬å‡½æ•°å…¥å‚ä½œä¸ºå‚æ•°
  emit(eventName, ...args) {
    // æ£€æŸ¥ç›®æ ‡äº‹ä»¶æ˜¯å¦æœ‰ç›‘å¬å‡½æ•°é˜Ÿåˆ—
    if (this.handlers[eventName]) {
      // è¿™é‡Œéœ€è¦å¯¹ this.handlers[eventName] åšä¸€æ¬¡æµ…æ‹·è´ï¼Œä¸»è¦ç›®çš„æ˜¯ä¸ºäº†é¿å…é€šè¿‡ once å®‰è£…çš„ç›‘å¬å™¨åœ¨ç§»é™¤çš„è¿‡ç¨‹ä¸­å‡ºç°é¡ºåºé—®é¢˜
      const handlers = this.handlers[eventName].slice()
      // å¦‚æœæœ‰ï¼Œåˆ™é€ä¸ªè°ƒç”¨é˜Ÿåˆ—é‡Œçš„å›è°ƒå‡½æ•°
      handlers.forEach((callback) => {
        callback(...args)
      })
    }
  }

  // ç§»é™¤æŸä¸ªäº‹ä»¶å›è°ƒé˜Ÿåˆ—é‡Œçš„æŒ‡å®šå›è°ƒå‡½æ•°
  off(eventName, cb) {
    const callbacks = this.handlers[eventName]
    const index = callbacks.indexOf(cb)
    if (index !== -1) {
      callbacks.splice(index, 1)
    }
  }

  // ä¸ºäº‹ä»¶æ³¨å†Œå•æ¬¡ç›‘å¬å™¨
  once(eventName, cb) {
    // å¯¹å›è°ƒå‡½æ•°è¿›è¡ŒåŒ…è£…ï¼Œä½¿å…¶æ‰§è¡Œå®Œæ¯•è‡ªåŠ¨è¢«ç§»é™¤
    const wrapper = (...args) => {
      cb(...args)
      this.off(eventName, wrapper)
    }
    this.on(eventName, wrapper)
  }
}
```

### 3.3 è§‚å¯Ÿè€…æ¨¡å¼ä¸å‘å¸ƒ-è®¢é˜…æ¨¡å¼çš„åŒºåˆ«æ˜¯ä»€ä¹ˆ
> å‘å¸ƒè€…ç›´æ¥è§¦åŠåˆ°è®¢é˜…è€…çš„æ“ä½œï¼Œå«è§‚å¯Ÿè€…æ¨¡å¼
> å‘å¸ƒè€…ä¸ç›´æ¥è§¦åŠåˆ°è®¢é˜…è€…ã€è€Œæ˜¯ç”±ç»Ÿä¸€çš„ç¬¬ä¸‰æ–¹æ¥å®Œæˆå®é™…çš„é€šä¿¡çš„æ“ä½œï¼Œå«åšå‘å¸ƒ-è®¢é˜…æ¨¡å¼
[è§‚å¯Ÿè€…æ¨¡å¼](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d2b5047b97684f0a8da08793530ce7d5~tplv-k3u1fbpfcp-watermark.awebp)
[è®¢é˜…æ¨¡å¼](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8ea839ff291a40fd822f6c43203d31fd~tplv-k3u1fbpfcp-watermark.awebp)

### 3.4 ç­–ç•¥æ¨¡å¼
- é‡æ„å°åŠ©æ‰‹
```js
// å®šä¹‰ä¸€ä¸ªè¯¢ä»·å¤„ç†å™¨å¯¹è±¡
const priceProcessor = {
  pre(originPrice) {
    if (originPrice >= 100) {
      return originPrice - 20;
    }
    return originPrice * 0.9;
  },
  onSale(originPrice) {
    if (originPrice >= 100) {
      return originPrice - 30;
    }
    return originPrice * 0.8;
  },
  back(originPrice) {
    if (originPrice >= 200) {
      return originPrice - 50;
    }
    return originPrice;
  },
  fresh(originPrice) {
    return originPrice * 0.5;
  },
};

// è¯¢ä»·å‡½æ•°
function askPrice(tag, originPrice) {
  return priceProcessor[tag](originPrice)
}

// æ‰©å±•
priceProcessor.newUser = function (originPrice) {
  if (originPrice >= 100) {
    return originPrice - 50;
  }
  return originPrice;
}
```

### 3.5 çŠ¶æ€æ¨¡å¼
```js
class CoffeeMaker {
  constructor() {
    /**
    è¿™é‡Œç•¥å»å’–å•¡æœºä¸­ä¸å’–å•¡çŠ¶æ€åˆ‡æ¢æ— å…³çš„ä¸€äº›åˆå§‹åŒ–é€»è¾‘
  **/
    // åˆå§‹åŒ–çŠ¶æ€ï¼Œæ²¡æœ‰åˆ‡æ¢ä»»ä½•å’–å•¡æ¨¡å¼
    this.state = 'init';
    // åˆå§‹åŒ–ç‰›å¥¶çš„å­˜å‚¨é‡
    this.leftMilk = '500ml';
  }
  stateToProcessor = {
    that: this,
    american() {
      // å°è¯•åœ¨è¡Œä¸ºå‡½æ•°é‡Œæ‹¿åˆ°å’–å•¡æœºå®ä¾‹çš„ä¿¡æ¯å¹¶è¾“å‡º
      console.log('å’–å•¡æœºç°åœ¨çš„ç‰›å¥¶å­˜å‚¨é‡æ˜¯:', this.that.leftMilk)
      console.log('æˆ‘åªåé»‘å’–å•¡');
    },
    latte() {
      this.american()
      console.log('åŠ ç‚¹å¥¶');
    },
    vanillaLatte() {
      this.latte();
      console.log('å†åŠ é¦™è‰ç³–æµ†');
    },
    mocha() {
      this.latte();
      console.log('å†åŠ å·§å…‹åŠ›');
    }
  }

  // å…³æ³¨å’–å•¡æœºçŠ¶æ€åˆ‡æ¢å‡½æ•°
  changeState(state) {
    this.state = state;
    if (!this.stateToProcessor[state]) {
      return;
    }
    this.stateToProcessor[state]();
  }
}

const mk = new CoffeeMaker();
mk.changeState('latte');
```

### 3.6 è¿­ä»£å™¨æ¨¡å¼
> è¿­ä»£å™¨æ¨¡å¼æ˜¯è®¾è®¡æ¨¡å¼ä¸­å°‘æœ‰çš„ç›®çš„æ€§æå¼ºçš„æ¨¡å¼ã€‚æ‰€è°“â€œç›®çš„æ€§æå¼ºâ€å°±æ˜¯è¯´å®ƒä¸æ“å¿ƒåˆ«çš„ï¼Œå®ƒå°±è§£å†³è¿™ä¸€ä¸ªé—®é¢˜â€”â€”éå†

- ES6å¯¹è¿­ä»£å™¨çš„å®ç°
```js
const arr = [1, 2, 3]
const len = arr.length
for(item of arr) {
    console.log(`å½“å‰å…ƒç´ æ˜¯${item}`)
}
```

åŸç†

```js
const arr = [1, 2, 3]
// é€šè¿‡è°ƒç”¨iteratorï¼Œæ‹¿åˆ°è¿­ä»£å™¨å¯¹è±¡
const iterator = arr[Symbol.iterator]()

// å¯¹è¿­ä»£å™¨å¯¹è±¡æ‰§è¡Œnextï¼Œå°±èƒ½é€ä¸ªè®¿é—®é›†åˆçš„æˆå‘˜
iterator.next()
iterator.next()
iterator.next()
```

- å®ç°ä¸€ä¸ªè¿­ä»£å™¨ç”Ÿæˆå‡½æ•°
```js
// ç¼–å†™ä¸€ä¸ªè¿­ä»£å™¨ç”Ÿæˆå‡½æ•°
function *iteratorGenerator() {
    yield '1å·é€‰æ‰‹'
    yield '2å·é€‰æ‰‹'
    yield '3å·é€‰æ‰‹'
}

const iterator = iteratorGenerator()

iterator.next()
iterator.next()
iterator.next()
```

> ç”¨ES5å»å†™ä¸€ä¸ªèƒ½å¤Ÿç”Ÿæˆè¿­ä»£å™¨å¯¹è±¡çš„è¿­ä»£å™¨ç”Ÿæˆå‡½æ•°
```js
// å®šä¹‰ç”Ÿæˆå™¨å‡½æ•°ï¼Œå…¥å‚æ˜¯ä»»æ„é›†åˆ
function iteratorGenerator(list) {
    // idxè®°å½•å½“å‰è®¿é—®çš„ç´¢å¼•
    var idx = 0
    // lenè®°å½•ä¼ å…¥é›†åˆçš„é•¿åº¦
    var len = list.length
    return {
        // è‡ªå®šä¹‰nextæ–¹æ³•
        next: function() {
            // å¦‚æœç´¢å¼•è¿˜æ²¡æœ‰è¶…å‡ºé›†åˆé•¿åº¦ï¼Œdoneä¸ºfalse
            var done = idx >= len
            // å¦‚æœdoneä¸ºfalseï¼Œåˆ™å¯ä»¥ç»§ç»­å–å€¼
            var value = !done ? list[idx++] : undefined
            
            // å°†å½“å‰å€¼ä¸éå†æ˜¯å¦å®Œæ¯•ï¼ˆdoneï¼‰è¿”å›
            return {
                done: done,
                value: value
            }
        }
    }
}

var iterator = iteratorGenerator(['1å·é€‰æ‰‹', '2å·é€‰æ‰‹', '3å·é€‰æ‰‹'])
iterator.next()
iterator.next()
iterator.next()
```
